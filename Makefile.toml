[config]
default_to_workspace = false

[env]
CARGO_MAKE_EXTEND_WORKSPACE_MAKEFILE = true
CARGO_PROFILE = "${CARGO_MAKE_CARGO_PROFILE}"

[tasks.build]
dependencies = ["build-win32", "build-native"]

[tasks.build-win32]
description = "Build 32-bit Windows components (cork and dll)"

[tasks.build-win32.windows]
command = "cargo"
args = ["build", "--target", "i686-pc-windows-msvc", "-p", "cork", "-p", "dll"]

[tasks.build-win32.linux]
command = "cargo"
args = ["build", "--target", "i686-pc-windows-gnu", "-p", "cork", "-p", "dll"]

[tasks.build-win32.mac]
command = "cargo"
args = ["build", "--target", "i686-pc-windows-gnu", "-p", "cork", "-p", "dll"]

[tasks.build-native]
description = "Build native components (desktop, cli)"
command = "cargo"
args = ["build", "-p", "desktop", "-p", "cli"]

[tasks.cork]
description = "Build cork for 32-bit Windows (auto-selects toolchain)"

[tasks.cork.windows]
command = "cargo"
args = ["build", "--target", "i686-pc-windows-msvc", "-p", "cork"]

[tasks.cork.linux]
command = "cargo"
args = ["build", "--target", "i686-pc-windows-gnu", "-p", "cork"]

[tasks.cork.mac]
command = "cargo"
args = ["build", "--target", "i686-pc-windows-gnu", "-p", "cork"]

[tasks.dll]
description = "Build dll for 32-bit Windows (auto-selects toolchain)"

[tasks.dll.windows]
command = "cargo"
args = ["build", "--target", "i686-pc-windows-msvc", "-p", "dll"]

[tasks.dll.linux]
command = "cargo"
args = ["build", "--target", "i686-pc-windows-gnu", "-p", "dll"]

[tasks.dll.mac]
command = "cargo"
args = ["build", "--target", "i686-pc-windows-gnu", "-p", "dll"]
